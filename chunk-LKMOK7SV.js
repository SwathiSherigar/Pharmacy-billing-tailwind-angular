import{b as Q}from"./chunk-Z5JUFHBN.js";import{a as D,b as at,c as ot,d as nt,e as rt}from"./chunk-MAB43R7X.js";import{Qa as lt,R as et,T as it,j as O,k as q,l as z,m as G,n as Y,o as J,p as K,q as U,r as W,s as X,t as Z,u as tt}from"./chunk-6DDDFETU.js";import{$ as M,$a as T,Ea as c,Ec as L,Fb as i,Gb as g,Hb as p,Ib as $,Ka as E,Ob as H,Pa as f,Sb as F,_ as C,bb as B,cb as R,db as u,eb as m,fb as d,gb as h,hb as n,ib as r,kb as x,la as I,lb as b,lc as N,nb as V,pb as _,qb as k,rb as y,vb as j,wb as P,xb as A,ya as l}from"./chunk-5UZPQVKE.js";import{a as w,b as S}from"./chunk-KAT7YFEL.js";function ft(e,a){if(e&1&&(n(0,"tr",16)(1,"td",24)(2,"div",25),i(3),r(),n(4,"div",26),i(5),r()(),n(6,"td",27),i(7),r(),n(8,"td",28),i(9),r(),n(10,"td",29),i(11),r()()),e&2){let t=a.$implicit;l(3),g(t.name),l(2),$("Batch: ",t.batch," | Exp: ",t.expiry),l(2),g(t.qty),l(2),p("\u20B9",t.rate),l(2),p("\u20B9",t.qty*t.rate)}}var v=class e{constructor(a,t){this.data=a;this.dialogRef=t}formatDate(a){return new Date(a).toLocaleDateString("en-IN")}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||e)(c(nt),c(ot))};static \u0275cmp=E({type:e,selectors:[["app-bill-view-dialog"]],decls:48,vars:5,consts:[[1,"p-6","font-sans","text-gray-800","relative","overflow-auto"],[1,"flex","justify-between","items-start","mb-6","border-b","pb-4"],[1,"text-2xl","font-bold","text-primary","m-0"],[1,"text-sm","text-gray-500"],[1,"text-right"],[1,"font-semibold","text-lg"],[1,"text-xs","text-gray-500"],[1,"grid","grid-cols-2","gap-4","mb-6","text-sm"],[1,"text-gray-500","uppercase","text-[10px]","font-bold","tracking-wider"],[1,"font-medium","text-base"],[1,"border","rounded-lg","overflow-hidden","mb-6"],[1,"w-full","text-left","text-sm"],[1,"bg-gray-50","border-b"],[1,"px-3","py-2"],[1,"px-3","py-2","text-center"],[1,"px-3","py-2","text-right"],[1,"border-b","last:border-0"],[1,"flex","justify-end","pt-2"],[1,"w-1/2"],[1,"flex","justify-between","items-center","py-2","border-t-2","border-primary"],[1,"font-bold","text-lg","text-primary"],[1,"font-bold","text-xl","text-primary"],[1,"mt-8","flex","justify-end","gap-2","no-print"],["mat-button","","mat-dialog-close","",3,"click"],[1,"px-3","py-3"],[1,"font-medium"],[1,"text-[10px]","text-gray-400"],[1,"px-3","py-3","text-center"],[1,"px-3","py-3","text-right"],[1,"px-3","py-3","text-right","font-semibold"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),i(4,"INVOICE"),r(),n(5,"p",3),i(6),r()(),n(7,"div",4)(8,"p",5),i(9,"Akash Pharma"),r(),n(10,"p",6),i(11),r()()(),n(12,"div",7)(13,"div")(14,"p",8),i(15,"Patient"),r(),n(16,"p",9),i(17),r()(),n(18,"div",4)(19,"p",8),i(20,"Doctor"),r(),n(21,"p",9),i(22),r()()(),n(23,"div",10)(24,"table",11)(25,"thead",12)(26,"tr")(27,"th",13),i(28,"Item"),r(),n(29,"th",14),i(30,"Qty"),r(),n(31,"th",15),i(32,"Price"),r(),n(33,"th",15),i(34,"Total"),r()()(),n(35,"tbody"),B(36,ft,12,6,"tr",16,T),r()()(),n(38,"div",17)(39,"div",18)(40,"div",19)(41,"span",20),i(42,"Grand Total"),r(),n(43,"span",21),i(44),r()()()(),n(45,"div",22)(46,"button",23),k("click",function(){return o.close()}),i(47,"Close"),r()()()),t&2&&(l(6),p("ID: #",o.data.id),l(5),g(o.formatDate(o.data.date)),l(6),g(o.data.patient==null?null:o.data.patient.name),l(5),p("Dr. ",o.data.doctor==null?null:o.data.doctor.name),l(14),R(o.data.items),l(8),p("\u20B9",o.data.total))},encapsulation:2})};var ut=()=>[10,50,100];function xt(e,a){e&1&&(m(0,"th",16),i(1," Patient "),d())}function bt(e,a){if(e&1){let t=V();m(0,"td",17),_("click",function(){let s=C(t).$implicit,mt=y();return M(mt.viewBill(s))}),i(1),d()}if(e&2){let t=a.$implicit;l(),p(" ",t.patient.name," ")}}function gt(e,a){e&1&&(m(0,"th",16),i(1," Doctor "),d())}function Et(e,a){if(e&1&&(m(0,"td",18),i(1),d()),e&2){let t=a.$implicit;l(),p(" ",t.doctor.name," ")}}function ht(e,a){e&1&&(m(0,"th",16),i(1," Total "),d())}function Dt(e,a){if(e&1&&(m(0,"td",18),i(1),d()),e&2){let t=a.$implicit;l(),p(" \u20B9",t.total," ")}}function vt(e,a){e&1&&(m(0,"th",16),i(1," Date "),d())}function _t(e,a){if(e&1&&(m(0,"td",18),i(1),d()),e&2){let t=a.$implicit,o=y();l(),p(" ",o.formatDate(t.date)," ")}}function yt(e,a){e&1&&h(0,"tr",19)}function wt(e,a){e&1&&h(0,"tr",20)}var dt=class e{constructor(a,t,o){this.router=a;this.store=t;this.dialog=o;I(()=>{this.dataSource.data=this.bills()})}displayedColumns=["patient","doctor","total","date"];dataSource=new tt([]);paginator;bills=F(()=>this.store.enrichedBills());ngAfterViewInit(){this.dataSource.paginator=this.paginator}goToBilling(){this.router.navigate(["/billing"])}formatDate(a){let t=new Date(a);return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`}viewBill(a){console.log(a),this.dialog.open(v,{data:S(w({},a),{type:"patient"}),width:"500px",maxHeight:"70vh",autoFocus:!1,panelClass:"dialog-wrapper"}).afterClosed().subscribe(async o=>{o&&await this.store.updatePatient(o)})}static \u0275fac=function(t){return new(t||e)(c(Q),c(lt),c(rt))};static \u0275cmp=E({type:e,selectors:[["app-dashboard"]],viewQuery:function(t,o){if(t&1&&j(D,5),t&2){let s;P(s=A())&&(o.paginator=s.first)}},decls:22,vars:5,consts:[[1,"p-4","!pt-0","flex","flex-col","gap-4","h-full",2,"height","calc(100vh - 54px)"],[1,"flex","justify-end","items-center","pt-2"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","flex-col","bg-white","rounded","shadow-md","flex-1","overflow-hidden"],[1,"overflow-auto","flex-1"],["mat-table","",1,"w-full","mat-elevation-z2","rounded",3,"dataSource"],["matColumnDef","patient"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-primary font-medium",3,"click",4,"matCellDef"],["matColumnDef","doctor"],["mat-cell","",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","date"],["mat-header-row","","class","!bg-gray-100 border-b !border-gray-300",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"text-primary","font-medium",3,"click"],["mat-cell",""],["mat-header-row","",1,"!bg-gray-100","border-b","!border-gray-300"],["mat-row",""]],template:function(t,o){t&1&&(m(0,"div",0)(1,"div",1)(2,"button",2),_("click",function(){return o.goToBilling()}),i(3," + Add Bill "),d()(),m(4,"div",3)(5,"div",4)(6,"table",5),x(7,6),f(8,xt,2,0,"th",7)(9,bt,2,1,"td",8),b(),x(10,9),f(11,gt,2,0,"th",7)(12,Et,2,1,"td",10),b(),x(13,11),f(14,ht,2,0,"th",7)(15,Dt,2,1,"td",10),b(),x(16,12),f(17,vt,2,0,"th",7)(18,_t,2,1,"td",10),b(),f(19,yt,1,0,"tr",13)(20,wt,1,0,"tr",14),d()(),h(21,"mat-paginator",15),d()()),t&2&&(l(6),u("dataSource",o.dataSource),l(13),u("matHeaderRowDef",o.displayedColumns),l(),u("matRowDefColumns",o.displayedColumns),l(),u("pageSizeOptions",H(4,ut)))},dependencies:[N,Z,O,z,K,G,q,U,Y,J,W,X,it,et,L,at,D],encapsulation:2})};export{dt as Dashboard};
